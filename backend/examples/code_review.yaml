# Code Review Workflow
# Multiple reviewers in parallel, then a lead consolidates

agents:
  - id: security_reviewer
    role: Security Specialist
    goal: Review code for security vulnerabilities
    model: openai
    instruction: |
      You are a security specialist. Review code for:
      - SQL injection vulnerabilities
      - XSS vulnerabilities
      - Authentication/authorization issues
      - Data exposure risks
      - Input validation problems

      Provide specific security recommendations.

  - id: performance_reviewer
    role: Performance Engineer
    goal: Review code for performance issues
    model: openai
    instruction: |
      You are a performance engineer. Review code for:
      - Algorithm efficiency
      - Memory usage
      - Database query optimization
      - Caching opportunities
      - Scalability concerns

      Provide specific performance recommendations.

  - id: style_reviewer
    role: Code Quality Specialist
    goal: Review code for style and maintainability
    model: openai
    instruction: |
      You are a code quality specialist. Review code for:
      - Code readability
      - Naming conventions
      - Documentation quality
      - Design patterns usage
      - SOLID principles adherence

      Provide specific quality recommendations.

  - id: lead_reviewer
    role: Lead Developer
    goal: Consolidate all reviews and prioritize fixes
    model: openai
    instruction: |
      You are the lead developer. Based on all reviews:
      - Prioritize issues by severity
      - Group related issues
      - Create actionable fix recommendations
      - Provide an overall code health assessment

      Create a final review summary with prioritized action items.

workflow:
  type: parallel
  branches:
    - security_reviewer
    - performance_reviewer
    - style_reviewer
  then:
    agent: lead_reviewer
